<!-- TODO: <app-shortcut-list /> -->
<div class="flex flex-col grow px-4 py-8">
  <div class="title-container text-center mb-8">
    <h1 class="text-2xl font-bold">Tabbo</h1>
    <p class="text-sm">
      the tab tool for tabbing top, trivial, trendy or thematically tab-alicious
      thumping triumphant tabs
    </p>
    <p class="text-xs">(alliteration is cool :3)</p>
  </div>

  <!-- TODO: List available tabs saved locally. Open them on click -->

  <div class="workspace">
    @let activeTab = activeTabData();
    @if (!activeTab) {
      <div class="empty-workspace-notice">
        <p class="text-sm text-purple-300">No tab is active right now</p>
        <button class="themed" (click)="openNewTab()">Create new tab</button>
      </div>
    } @else {
      <div class="tab flex gap-1">
        <app-tab-tuning [tuning]="activeTab.tuning" />
        <div aria-hidden="true" class="w-[1px] bg-white"></div>
        <app-tab-sheet
          [content]="activeTab.content"
          [hasTabChanged]="hasTabChanged()"
          [selectedColumn]="editingColumn()"
          (onColumnUpdate)="updateEditingColumn($event)"
          (onSaveRequest)="saveTab()"
        />
      </div>
    }

    @let err = error();
    @if (err) {
      <p class="error-notice block mt-3 text-red-400 text-xs">{{ err }}</p>
    }
  </div>
</div>

<app-fretboard
  [instrument]="activeTab?.instrument || defaults.instrument"
  [tuning]="activeTab?.tuning || defaults.tuning"
  [fretAmount]="defaults.fretAmount"
  (fretTapped)="updateCurrentTab($event)"
/>
